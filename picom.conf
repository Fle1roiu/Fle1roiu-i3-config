# Использование xrender для стабильности в виртуальной машине
backend = "glx";
vsync = false;

# Все окна по умолчанию плотные (непрозрачные)
active-opacity = 1.0;
inactive-opacity = 1.0;
frame-opacity = 1.0;

# Магия: прозрачность только для UXTerm
# 85 — это уровень прозрачности. Чем меньше число, тем больше прозрачность.
opacity-rule = [
    "85:class_g = 'UXTerm'",
    "85:class_g = 'XTerm'",
    "90:class_g = 'Thunar'",
    "95:class_g = 'Rofi'"
];

# Исключаем тени для прозрачных окон (по желанию)
# Тень добавит "глубины" твоему быстрому затуханию
shadow = true;
shadow-radius = 12;
shadow-offset-x = -12;
shadow-offset-y = -12;
shadow-opacity = 0.5;

# Убираем тени с панелек, чтобы не мешали
shadow-exclude = [
  "name = 'Notification'",
  "class_g = 'Polybar'",
  "class_g ?= 'Notify-osd'",
  "_GTK_FRAME_EXTENTS@:c"
];

# Радиус закругления углов
corner-radius = 12;

# Исключения (если не хочешь закруглять что-то конкретное, например, полибар)
rounded-corners-exclude = [
  "window_type = 'dock'",
  "window_type = 'desktop'"
];

# --- Параметры размытия ---
blur: {
  method = "dual_kawase";
  strength = 7;           # Сила размытия (от 1 до 20)
  background = true;      # Размывать то, что ЗА окном
  background-frame = false;
  background-fixed = false;
}

# Чтобы блюр не тормозил на всей системе, исключаем некоторые окна
blur-background-exclude = [
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "_GTK_FRAME_EXTENTS@:c"
];

# Включаем затухание
fading = true;

# Время между шагами в миллисекундах (меньше = быстрее)
# Ставим 10 для очень плавной смены кадров
fade-delta = 5;

# На сколько меняется прозрачность при открытии (0.01 - 1.0)
# Ставим 0.02, чтобы окно проявлялось долго и "тягуче"
fade-in-step = 0.02;

# На сколько меняется прозрачность при закрытии
fade-out-step = 0.02;

# Список окон, которые НЕ должны затухать (если нужно)
fade-exclude = [
  "class_g = 'slop'"   # Скриншоты
];
